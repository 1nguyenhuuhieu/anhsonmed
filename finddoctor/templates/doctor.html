{% extends 'base.html' %}

{% block content %}
{% load static %}


<div class="container pt-4">

  <div class="text-center">
    <img src="/media/{{ doctor.avatar }}" alt="" class="rounded-circle img-fluid w-75 border shadow" style="max-width: 300px;">

    <h5 class="mt-4">{{doctor.name}}
      <br>
      <small class="text-muted"> {{ doctor.highlight }}</small>
      <hr class="w-50">
  <small class="text-warning">
    
  
      <i class="fas fa-star mr-1"></i><i class="fas fa-star mr-1"></i><i class="fas fa-star mr-1"></i><i class="fas fa-star mr-1"></i><i class="fas fa-star mr-1"></i> <a href=# class="text-muted">(Xem 28 đánh giá)</a>

     

      </small>
  
    </h5>


  
    <div class="d-flex justify-content-between pt-3 pb-1 ">



      {% if request.user.is_authenticated %}
  
      <a href="{% url 'bookappointment' doctor.id %}" class="btn btn-success"><i class="far fa-calendar-check mr-2"></i>Đặt lịch khám</a> 

      {% else %}

      <!-- Button trigger modal -->
<button type="button " class="btn btn-success" data-toggle="modal" data-target="#exampleModal">
<i class="far fa-calendar-check mr-2"></i> Đăng Ký Khám
</button>

<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
<div class="modal-dialog">
<div class="modal-content ">
<div class="modal-header bg-danger">
  <h5 class="modal-title" id="exampleModalLabel">Thông báo</h5>
  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
    <span aria-hidden="true">&times;</span>
  </button>
</div>
<div class="modal-body">
  Bạn cần đăng nhập để đăng ký khám
</div>
<div class="modal-footer">
  <button type="button" class="btn btn-outline-dark" data-dismiss="modal"><i class="fas fa-times mr-2"></i>Huỷ</button>
  <a href="{% url 'login' %}"  class="btn btn-outline-dark">Đăng Nhập</a>
  <a href="{% url 'login' %}"  class="btn btn-success">Đăng Ký</a>
</div>
</div>
</div>
</div>

      {% endif %}



     


  
      <div>
        <button class="btn btn-light bg-jumbotron border-0 mr-2"><i class="fas fa-phone"></i></button>
        <button class="btn btn-light bg-jumbotron border-0 "><i class="fas fa-comment-medical "></i></button>
      </div>
     
    </div>

  </div>



  <hr>

  <div class="row mb-2">
    <div class="col-1">
      <i class="fas fa-stethoscope"></i></div>
    <div class="col-11">Phẫu thuật nội soi
    </div>
  </div>


  <div class="row mb-2 ">
    <div class="col-1">
      <i class="fas fa-clinic-medical"></i></div>
    <div class="col-11">Trưởng Khoa tại <a href="#" >Khoa Ngoại</a>
    </div>
  </div>

  {% for education in educations %}

  <div class="row mb-2">
    <div class="col-1">  <i class="fas fa-graduation-cap"></i></div>
    <div class="col-11">{{ education.title|title }} tại <a href="/university/{{ education.certified_by}}" >{{ education.certified_by|title }}</a> vào năm {{ education.certified_date.year}}
    </div>
  </div>


  {% endfor %}
<hr>

<!-- Button trigger modal -->
<button type="button" class="btn btn-success w-100" data-toggle="modal" data-target="#exampleModal">
  <i class="fas fa-pen-alt mr-2 "></i>Viết đánh giá
</button>

{% if request.user.is_authenticated %}
<!-- Modal -->
<div class="modal  fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog ">
    <div class="modal-content  ">
      <div class="modal-header bg-success">
        <h5 class="modal-title" id="exampleModalLabel"><i class="fas fa-pen-alt mr-2 "></i>Viết đánh giá</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        

        <div class="card border  shadow-sm  borderradius15 py-0 mb-3 mt-4" >
          <div class="row no-gutters  py-3">
            <div class="col-4 col-md-1 d-flex  align-items-center px-2 ">
             
              <img src="/media/{{ doctor.avatar}}" class="card-img rounded-circle" alt=" Nguyễn Hữu Hiếu">
            </div>
            <div class="col-8  col-md-11 ">
              <div class="card-body py-0  pl-1 pr-2  ">
         
                <h5 class="card-title m-0">{{ doctor.name }}
                 </h5>
                 
    
                 <hr class=" mt-2 mb-1 ">
             
    <span class="text-muted ">
    
      {{ doctor.highlight }}
    
    
      
      </span>
            </div>
            </div>
    
            
          </div>
    
        </div>
  <p class="text-center">Đánh giá của bạn</p>

  <!-- starvote -->
  <form id="voting" class="" method="POST">	
    {% csrf_token %}
    <div class="text-warning text-center">
    <input type="radio" name="points" value="1" id="p-1" />
    <label for="p-1"><i class="fa fa-star-o fa-2x"></i></label>
    
    <input type="radio" name="points" value="2" id="p-2" />
    <label for="p-2"><i class="fa fa-star-o fa-2x"></i></label>
    
    <input type="radio" name="points" value="3" id="p-3" />
    <label for="p-3"><i class="fa fa-star-o fa-2x"></i></label>
    
    <input type="radio" name="points" value="4" id="p-4" />
    <label for="p-4"><i class="fa fa-star-o fa-2x"></i></label>
    
    <input type="radio" name="points" value="5" id="p-5" />
    <label for="p-5"><i class="fa fa-star-o fa-2x"></i></label>
  </div> 


  <script>
    $('#voting input[name=points]').change(function() {
	console.log($(this).parent().find('label'));
	$(this).parent().children('label').each(function(key, val) {
		console.log(val,$(val));
		$(val).find('i').removeClass('fa-star').addClass('fa-star-o');
	});
	$(this).children('label i').removeClass('fa-star').addClass('fa-star-o');
	$(this).find('+ label i').removeClass('fa-star-o').addClass('fa-star');
	$(this).prevAll().find('+ label i').removeClass('fa-star-o').addClass('fa-star');
});
  </script>
  <!-- starvote -->
<hr>

      <label for="exampleFormControlTextarea1">Viết nhận xét dành cho bác sĩ</label>
      <textarea class="form-control" id="exampleFormControlTextarea1" rows="3" name='comment'></textarea>
<div class="text-right">
  <button type="button" class="btn btn-outline-dark mt-4 mr-2" data-dismiss="modal"><i class="fas fa-times mr-2"></i>Huỷ</button>
  
  <button type="submit" class="btn btn-success  mt-4"><i class="fas fa-paper-plane mr-2"></i>Gửi đánh giá</button>
</div>
    
    </form>


        


      </div>

    </div>
  </div>
</div>
{% else %}
<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content ">
      <div class="modal-header bg-danger">
        <h5 class="modal-title" id="exampleModalLabel">Thông báo</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        Bạn cần đăng nhập để đăng ký khám
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-light" data-dismiss="modal">Đóng</button>
        <a href="{% url 'login' %}"  class="btn btn-outline-dark">Đăng Nhập</a>
        <a href="{% url 'login' %}"  class="btn btn-success">Đăng Ký</a>
      </div>
    </div>
  </div>
</div>
{% endif %}



  <hr>

  <div class="row ">
    <div class="col-5 border-right text-center">
      <h1 class="m-0">4.5</h1>
      <span class="text-warning" style="font-size: 10px;"><i class="fas fa-star mr-1"></i><i class="fas fa-star mr-1"></i><i class="fas fa-star mr-1"></i><i class="fas fa-star mr-1"></i><i class="fas fa-star"></i></span>
     <br> <span class="text-muted" >12 đánh giá</span>
    </div>
    <div class="col-7 ">

      <p class="text-warning m-0" style="font-size: 13px;"><i class="fas fa-star mr-1"></i><i class="fas fa-star mr-1"></i><i class="fas fa-star mr-1"></i><i class="fas fa-star mr-1"></i><i class="fas fa-star mr-3"></i> <span class="text-dark"> 10 </span></p>  
      
      <p class="text-warning m-0" style="font-size: 13px;"><i class="fas fa-star mr-1"></i><i class="fas fa-star mr-1"></i><i class="fas fa-star mr-1"></i><i class="fas fa-star mr-1"></i><i class="far fa-star mr-3"></i><span class="text-dark"> 10 </span></p>  
      
      <p class="text-warning m-0" style="font-size: 13px;"><i class="fas fa-star mr-1"></i><i class="fas fa-star mr-1"></i><i class="fas fa-star mr-1"></i><i class="far fa-star mr-1"></i><i class="far fa-star mr-3"></i><span class="text-dark"> 10 </span></p>  
      
      <p class="text-warning m-0" style="font-size: 13px;"><i class="fas fa-star mr-1"></i><i class="fas fa-star mr-1"></i><i class="far fa-star mr-1"></i><i class="far fa-star mr-1"></i><i class="far fa-star mr-3"></i><span class="text-dark"> 10 </span></p>  

      <p class="text-warning m-0" style="font-size: 13px;"><i class="fas fa-star mr-1"></i><i class="far fa-star mr-1"></i><i class="far fa-star mr-1"></i><i class="far fa-star mr-1"></i><i class="far fa-star mr-3"></i><span class="text-dark"> 10 </span></p>  
      
      


      
  
  </div>
</div>

{% for comment in comments reversed %}

  <hr>

  <!-- comment -->
  <div class="row no-gutters">
    <div class="col-2 pr-1">
      <img src="/media/{{ comment.user.userprofile.avatar }}" class="img-fluid rounded-circle" alt="">
    </div>
    <div class="col-10 pl-2">
      <p>{{ comment.user.userprofile.name }}  
        <br>
        <small class="text-success"><i class="fas fa-check-circle mr-1"></i>Đã khám bệnh bởi bác sĩ {{ doctor.name }}</small>
        </p>

        <div class="d-flex justify-content-between">
          <small class="text-warning">

       
{% for i in '12345' %}
{% if forloop.counter0 < comment.stars %}


         <i class="fas fa-star mr-1"></i>

         {% endif %}
   
         {% endfor %}
 

          </small>
          <small class="text-muted">Đăng ngày {{ comment.created|date }}</small> 
        </div>
     

<br>
  <h5>Cực kì hài lòng</h5>
    
    <p>  {{ comment.comment}}</p>



  

  
    </div>
  </div>

  <!-- end comment -->

{% endfor %}








</div>






{% endblock %}